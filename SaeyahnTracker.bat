@ECHO OFF
if not defined SAEYAHN_CONHOST (
	SET SAEYAHN_CONHOST=1
	CALL CONHOST %0
	EXIT /B
)
SETLOCAL ENABLEDELAYEDEXPANSION
call :RESET_VARIABLES
TITLE SaeyahnTracker Version !VERSIONINFO!
chcp 65001 >nul
mode 120, 30 >nul
REM COLOR 8F

:DRAWLOGO 
SET /A DISPLAYED_MODEY=ROWS+20
REM MODE 120, !DISPLAYED_MODEY!
CLS
CALL :STRLENFIT DISPLAYED_SONGAUTHOR 27 "!SONGAUTHOR!"
CALL :STRLENFIT DISPLAYED_SONGNAME 27 "!SONGNAME!"
echo [48;2;0;0;61m┌[7m[F9][27m─ MAIN TAB ──────────────────────────────────────────────────────────────────────────────────────────────────────┐

ECHO └──[7m[O][27m_OPEN──[7m[S][27m_SAVE──[7m[R][27m_RENDER──[7m[C][27m_CHANGE SOUND DRIVER────────────────────────────────────────────────────────────┘[0m
echo ┌[7m[F3][27m─ SONG INFORMATION ──────────────────────────────────────────────────────────────────────────────────────────────┐
echo ^|  ________________\       /________________	[7m[B][27m_BPM		: !BPM!	^|[7m[T][27m_SONG TITLE	: [4m!DISPLAYED_SONGNAME![24m ^|
echo ^|  ^|                \     /                ^|	[7m[R][27m_ROWS	: !ROWS!	^|[7m[A][27m_AUTHOR	: [4m!DISPLAYED_SONGAUTHOR![24m ^|
echo ^|  ^|____ _____ _____ \   / _____ _   _ _   ^|	[7m[H][27m_HIGHLIGHT	: !HIGHLIGHT!	^|
echo ^|      ^| ^|   ^| ^|      \ /  ^|   ^| ^|   ^| ^|\  ^|	[7m[S][27m_EDIT STEP^(S^): !EDITSTEPS!	^|
echo ^|      ^| ^|___^| ^|____   ^|   ^|___^| ^|___^| ^| \ ^|
echo ^|      ^| ^|   ^| ^|       ^|   ^|   ^| ^|   ^| ^|  \^|
echo ^|  ____^| ^|   ^| ^|____   ^|   ^|   ^| ^|   ^| ^|   ^|
echo ^|  	Tracker Version !VERSIONINFO!
REM ECHO ^|
REM ECHO └─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘[48;2;64;74;81m
REM echo [48;2;64;74;81m^| Frames: [48;2;44;54;61m

ECHO └─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

echo [48;2;44;54;61m┌[7m[F1][27m_TRACKER SECTION ────────────────────────────────────────────────────────────────────────────────────────────────┐
ECHO ^|   Channel 1    ^|:^|   Channel 2    ^|:^|   Channel 3    ^|:^|   Channel 4    ^|:^|   Channel 5    ^|:^|   Channel 6    ^|     ^|
ECHO ^|  Playing !CH1_STAT_CURRNOTE!   ^|:^|  Playing !CH2_STAT_CURRNOTE!   ^|:^|  Playing !CH3_STAT_CURRNOTE!   ^|:^|  Playing !CH4_STAT_CURRNOTE!   ^|:^|  Playing !CH5_STAT_CURRNOTE!   ^|:^|  Playing !CH6_STAT_CURRNOTE!   ^|     ^|
ECHO ^|---------------------------------------------------------------------------------------------------------------^|     ^|[48;2;24;34;51m
REM ECHO [48;2;24;34;51m^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|:^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|:^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|:^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|:^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|:^|!CH1_STAT_CURRNOTE!:01:F:E80:S04^|     ^|
REM ECHO !FRAME1:~
set i=0
for /f "tokens=* delims==" %%a in ("!FRAME1!") do for %%b in (%%a) do (
	REM set /a i+=1
	SET "FRAMESHOWTEMP_ALL="
	REM echo %%b !i!
	for /f "tokens=1,2,3,4,5,6 delims=:" %%1 in ("%%b") do (
		
		set "FRAMESHOWTEMP_7=%%1"
		set "FRAMESHOWTEMP_8=%%2"
		set "FRAMESHOWTEMP_9=%%3"
		set "FRAMESHOWTEMP_10=%%4"
		set "FRAMESHOWTEMP_11=%%5"
		set "FRAMESHOWTEMP_12=%%6"
		FOR /L %%C IN (7, 1, 12) do (
			SET "FRAMESHOWTEMP_ALL=!FRAMESHOWTEMP_ALL!!FRAMESHOWTEMP_%%C:~0,3!:!FRAMESHOWTEMP_%%C:~3,2!:!FRAMESHOWTEMP_%%C:~5,1!:!FRAMESHOWTEMP_%%C:~6,3!:!FRAMESHOWTEMP_%%C:~9,3!^|:^|"
		)
		REM ECHO ^|!FRAMESHOWTEMP_C:~0,3!:!FRAMESHOWTEMP_C:~3,2!:!FRAMESHOWTEMP_C:~5,1!:!FRAMESHOWTEMP_C:~6,3!:!FRAMESHOWTEMP_C:~9,3!^|:
		IF !I! LEQ 10 IF !CURSOR_Y! EQU !I! ( ECHO [7m^|!FRAMESHOWTEMP_ALL:~0,-2! [27m !i! ) ELSE ECHO ^|!FRAMESHOWTEMP_ALL:~0,-2! [7m !i! [27m
	)
	set /a i+=1
)
REM for /f "tokens=* delims==" %%a in ("f=f=f") do (
    REM for %%b in (%%a) do (
        REM echo %%b
    REM )
REM )
   
REM ECHO | PLAYING D#3|
REM echo |D#3.03.E.P80|
powershell "exit($Host.UI.RawUI.ReadKey('NoEcho,IncludeKeyDown').VirtualKeyCode)"
if "!errorlevel!"=="40" set /a CURSOR_Y+=1
if "!errorlevel!"=="38" set /a CURSOR_Y-=1
REM ECHO !CURSOR_Y!
REM PAUSE
GOTO DRAWLOGO

:RESET_VARIABLES
REM SET "COLOR_MENU=87"
SET "FRAME1=ABCDEF123456:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________=____________:____________:____________:____________:____________:____________"
SET "VERSIONINFO=ALPHA VERSION"
SET BPM=165
SET HIGHLIGHT=4
SET ROWS=64
SET "SONGNAME=UNTITLED
SET "SONGAUTHOR=FUCK"
SET EDITSTEPS=1
REM SET "

SET CURR_TAV=1
SET CURR_FRAME=0
SET FRAMES=1

SET CURSOR_X=0
SET CURSOR_Y=0
SET CURSOR_REC=0
SET CH1_STAT_CURRNOTE=___
SET CH2_STAT_CURRNOTE=C#3
SET CH3_STAT_CURRNOTE=F#4
SET CH4_STAT_CURRNOTE=C#1
SET CH5_STAT_CURRNOTE=___
SET CH6_STAT_CURRNOTE=___
GOTO :eOF

:STRLENFIT
set "STRLENFIT_TEMPVAR1=%1"
set "STRLENFIT_TEMPVAR2=%2"
shift
shift

set "STRLENFIT_TEMPVAR3="
:STRLENFIT_combineArgs
if "%~1"=="" goto :STRLENFIT_processString
set "STRLENFIT_TEMPVAR3=!STRLENFIT_TEMPVAR3!%~1 "
shift
goto :STRLENFIT_combineArgs

:STRLENFIT_processString
set "STRLENFIT_TEMPVAR3=!STRLENFIT_TEMPVAR3:~0,-1!"
for /l %%a in (0,1,64) do if not "!STRLENFIT_TEMPVAR3:~%%a,1!" == "" set /a STRLENFIT_TEMPVAR4+=1

if !STRLENFIT_TEMPVAR4! gtr !STRLENFIT_TEMPVAR2! (
	set "!STRLENFIT_TEMPVAR1!=!STRLENFIT_TEMPVAR3!
) else (
	set "!STRLENFIT_TEMPVAR1!=!STRLENFIT_TEMPVAR3!"
    set /a STRLENFIT_TEMPVAR5=STRLENFIT_TEMPVAR2 - STRLENFIT_TEMPVAR4
    for /l %%i in (1,1,!STRLENFIT_TEMPVAR5!) do set "!STRLENFIT_TEMPVAR1!=!%STRLENFIT_TEMPVAR1%! "
)
set "STRLENFIT_TEMPVAR1="
set "STRLENFIT_TEMPVAR2="
set "STRLENFIT_TEMPVAR3="
set "STRLENFIT_TEMPVAR4="
set "STRLENFIT_TEMPVAR5="
goto :eof
